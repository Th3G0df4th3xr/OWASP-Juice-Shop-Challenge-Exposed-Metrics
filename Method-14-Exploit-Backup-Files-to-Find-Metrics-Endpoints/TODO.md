üìÅ /Method-14-Exploit-Backup-Files-to-Find-Metrics-Endpoints/TODO.md

markdown
Copy
Edit
# ‚úÖ TODO ‚Äì Exploit Backup Files to Find Metrics Endpoints

## üéØ Objective:
To identify and extract exposed backup or configuration files (e.g., `.bak`, `.old`, `.zip`, `.tar.gz`, `.sql`, `.env`) that may contain hardcoded internal paths, sensitive environment variables, or direct references to metrics, Prometheus, or Grafana endpoints.

---

## üîß Step-by-Step TODO:

### [ ] Identify Backup Naming Patterns
- [ ] Review standard file backup patterns used in deployment (`index.bak`, `config.old`, `backup.zip`, etc.)
- [ ] Understand common locations on misconfigured servers (`/.git/`, `/backup/`, `/~`, `/bak/`)

### [ ] Run Targeted Wordlist Scan
- [ ] Use **ffuf**, **dirsearch**, or **gobuster**:
```bash
ffuf -u https://<TARGET>/FUZZ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -mc 200,302 -e .bak,.old,.zip,.tar.gz,.tar,.sql,.gz,.env,.ini
 Filter for 200 OK, 206 Partial Content, or 302 Redirect

 Save results for manual validation

[ ] Download Accessible Backup Files
 If found, download with wget or curl:

bash
Copy
Edit
wget https://<TARGET>/config.bak -O config.bak
[ ] Extract Compressed Archives
 For .zip or .tar.gz, extract locally:

bash
Copy
Edit
unzip backup.zip
tar -xzvf backup.tar.gz
[ ] Analyze File Contents
 Grep for keywords like prometheus, grafana, localhost, :9090, /metrics, token, api, auth, url

bash
Copy
Edit
grep -iE 'prometheus|grafana|metrics|localhost|9090|token' *.*
 Open configs like docker-compose.yml, .env, .conf for hardcoded endpoints

[ ] Test Endpoints Extracted
 Use curl to hit any URLs discovered:

bash
Copy
Edit
curl http://<IP>:9090/metrics
curl -I http://<IP>:3000/login
 Verify if dashboard or metrics content is exposed

[ ] Log All Endpoints and File Sources
 Document exact filenames ‚Üí endpoints discovered

 Annotate if unauthenticated access was allowed

[ ] Consider Localhost-only Risks
 If URLs are localhost-bound, note SSRF or internal pivoting may be needed in next steps

üõ†Ô∏è Tools Required:
ffuf, dirsearch, gobuster

wget, curl

unzip, tar

grep, cat, less

üìö Documentation Notes:
Describe backup file discovery logic

Document why .bak and .old pose a major security risk

Annotate all sensitive findings with HTTP response headers and sample file snippets

pgsql
Copy
Edit

# 📦 Method 14: Exploit Backup Files to Find Metrics Endpoints

## 🧠 Objective
Leverage misconfigured or publicly accessible backup/archive files (`.zip`, `.tar.gz`, `.bak`, `.old`, `.sql`, `.rar`, etc.) to uncover internal or administrative API endpoints that serve metrics (e.g., `/metrics`, `/actuator/prometheus`, `/debug/vars`, etc.). These backups may contain sensitive routes, configuration files, or full source code.

## 🎯 Why This Method?
Many devs leave backup files publicly accessible during staging or post-deployment due to oversight. These files often contain:
- Internal source code
- Hardcoded credentials
- Admin URLs
- Metrics endpoints
This strategy capitalizes on poor DevOps hygiene and improper `.gitignore` or `.dockerignore` policies.

---

## 🛠️ Step-by-Step Execution

### 🔍 1. Passive Enumeration – Look for Backup Files via Wayback & Google Dorking

#### Command:
```bash
curl -s https://web.archive.org/cdx/search/cdx?url=target.com/*&output=text | grep -Ei '\.zip|\.tar|\.gz|\.rar|\.bak|\.old|\.sql'
📖 Explanation: We’re using the Wayback Machine’s historical snapshot index (CDX API) to enumerate archived backup file URLs that existed at some point. Files like config.bak, website.tar.gz, or admin.zip can contain sensitive data or entire source code.

Google Dork:
css
Copy
Edit
site:target.com ext:zip | ext:tar | ext:gz | ext:sql | ext:bak | ext:rar
🔬 Backend Concept: Archive files are often crawled by bots and search engines unless explicitly blocked in robots.txt. If not removed after debugging or deployment, they may be served from web roots (/, /admin, /backup/, /dev/).

📥 2. Actively Download & Analyze the Files
Command:
bash
Copy
Edit
wget https://target.com/backup/config.zip -O config.zip
unzip config.zip -d extracted/
cd extracted/
🧪 What to expect: You may uncover:

.env or config.yaml with PROMETHEUS_METRICS_URL

Java Spring /actuator/* route

NodeJS express.Router API paths

NGINX configs referencing /status or /metrics

🔎 3. Grep for Metrics Keywords
Command:
bash
Copy
Edit
grep -Ri 'metrics\|prometheus\|actuator\|status\|debug' .
🧠 Why? Devs often use:

prometheus_client.expose() in Python

/actuator/prometheus in Spring Boot

GET /metrics in Go apps

/debug/vars in net/http/pprof-based Go services

🔗 4. Test the Discovered Endpoints
If metrics_path: /internal/metrics is discovered, test it in browser or terminal:

Command:
bash
Copy
Edit
curl -i https://target.com/internal/metrics
✔️ What to expect:

HTTP/1.1 200 OK

Content-Type: text/plain

Metric outputs like http_requests_total{method="GET"} 392

🧩 Strategic Mindset
This method banks on:

DevOps misconfigurations

Poor file hygiene

Forgotten debug artifacts

Non-hardened server configurations

💡 Remember: Backup files offer an entire attack surface snapshot. One leak can expose database credentials, internal services, and monitoring panels.

⚠️ Caution
Accessing and exploiting backup files without authorization is illegal and unethical. Only perform this method in an authorized testing environment or with the owner’s explicit consent.

✅ Success Indicators
Retrieved archive containing metrics endpoint(s)

Located /metrics, /actuator, or /status via code/config

Verified endpoint output with real-time metric data

javascript
Copy
Edit
